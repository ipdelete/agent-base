# Agent Validation Test Suite
version: "1.0"
name: "Agent CLI Validation"
description: "Real-world validation tests for agent functionality"

# Basic command tests
command_tests:
  - name: "Help command displays correctly"
    command: "uv run agent --help"
    timeout: 10
    expected:
      exit_code: 0
      stdout_contains:
        - "agent"
        - "--prompt"
        - "--check"
        - "Examples:"

  - name: "Version command works"
    command: "uv run agent --version"
    timeout: 5
    expected:
      exit_code: 0
      stdout_matches: "Agent version \\d+\\.\\d+\\.\\d+"

  - name: "Health check passes"
    command: "uv run agent --check"
    timeout: 10
    expected:
      exit_code: 0
      stdout_contains:
        - "Health Check"
        - "âœ“"
        - "passed"

  - name: "Configuration display"
    command: "uv run agent --config"
    timeout: 5
    expected:
      exit_code: 0
      stdout_contains:
        - "Configuration"
        - "Provider"

# Performance tests (CLI startup only, no LLM calls)
performance_tests:
  - name: "CLI startup time"
    command: "uv run agent --version"
    max_duration: 3
    expected:
      exit_code: 0

  - name: "Help command performance"
    command: "uv run agent --help"
    max_duration: 3
    expected:
      exit_code: 0

# Configuration tests
config_tests:
  - name: "Missing configuration handling"
    env:
      unset: ["LLM_PROVIDER", "OPENAI_API_KEY"]
    command: "uv run agent --check"
    expected:
      exit_code: 1
      stdout_contains_any:
        - "Configuration error"
        - "missing"
        - "required"